var About,App,Archive,Gallery,Home,Photos,Projects,Router,photosJson;photosJson=[{}],App={init:function(t){var o,e,r,n,i,a,s;return t&&(photosJson=t),$(document).on("click",".burger",function(){return App.toggleNav()}),$(document).on("click",".cover",function(){return App.toggleNav()}),$(document).on("click",".gallery-image",function(){var t,o,e;return o=$(this).attr("data-img"),e=$(this).attr("data-which"),$(".gallery").addClass("show-popup"),$(".popup").css("background-image",'url("./images/projects/'+e+"/gallery/"+o+'.jpg")'),t=$("."+e+" .gallery-image").length,App.setArrows(e,o)}),$(document).on("click",".gallery .arrow",function(){return $(".popup").css("background-image",'url("./images/projects/'+$(this).attr("data-which")+"/gallery/"+$(this).attr("data-link")+'.jpg")'),App.setArrows($(this).attr("data-which"),$(this).attr("data-link"))}),$(document).on("click",".popup",function(){return $(".popup").css("background-image","none"),$(".gallery").removeClass("show-popup")}),$(document).on("click",".popup-bg",function(){return $(".popup").css("background-image","none"),$(".gallery").removeClass("show-popup")}),$(document).on("click",".mobile-nav a",function(){return $(".container").attr("class","container mobile-closed").animate({left:"0"},500)}),s=new Router,e=new Archive,a=new Projects,r=new Gallery,i=new Photos,o=new About,n=new Home,s.on("route:home",function(){n.init()}),s.on("route:photos",function(t){i.init({id:t})}),s.on("route:about",function(){o.init()}),s.on("route:projects",function(){a.init()}),s.on("route:archive",function(t){e.init({id:t})}),s.on("route:gallery",function(t){r.init({id:t})}),Backbone.history.start()},setArrows:function(t,o){var e,r,n;e=$("."+t+" .gallery-image").length,n=1===parseInt(o)?parseInt(e):parseInt(o)-1,r=parseInt(o)===parseInt(e)?1:parseInt(o)+1,$(".gallery .arrow-right").attr("data-link",r).attr("data-which",t),$(".gallery .arrow-left").attr("data-link",n).attr("data-which",t)},toggleNav:function(){return $(".container").hasClass("mobile-closed")?$(".container").removeClass("mobile-closed").addClass("mobile-open").animate({left:"-180px"},500):$(".container").attr("class","container mobile-closed").animate({left:"0"},500)},preload:function(t){var o,e,r,n,i,a;for(a=[],o=r=n=t-5,i=t+5;i>=r;o=r+=1)o<=photosJson.length&&o!==t&&o>=0?(e=new Image,a.push(e.src="http://jaredkrau.se/img/gal/"+photosJson[o-1].code)):a.push(void 0);return a},preloadArchive:function(){var t,o,e,r,n,i;for(i=[],t=e=r=photosJson.length-24,n=photosJson.length;n>=e;t=e+=1)t<=photosJson.length&&t>=0?(o=new Image,i.push(o.src="http://jaredkrau.se/img/thumbnails/"+photosJson[t-1].code)):i.push(void 0);return i}},About=Backbone.View.extend({el:".content",init:function(){return $("body").attr("class","about-page"),this.render()},render:function(){var t;t=_.template($("#about").html()),this.$el.html(t())}}),Archive=Backbone.View.extend({el:".content",init:function(t){var o,e,r,n,i,a;for($("body").attr("class","archive-page"),this.photoArr=[],this.linkArr=[],n=Math.floor(photosJson.length/24),e=!1,0!==Math.floor(photosJson.length%24)&&(n+=1,e=!0),this.arrow="",i=24,o=1,parseInt(t.id,10)?(this.id=Math.floor(t.id),this.id>=n?this.id=n:this.id<=1&&(this.id=1)):this.id=n,this.id===n?this.arrow="right":1===this.id&&(this.arrow="left"),i=photosJson.length-24*(n-this.id)-1,o=i-23,e&&1===this.id&&(i=photosJson.length%24-1,o=1),r=a=o;i>=a;r=a+=1)this.linkArr.push(r),this.photoArr.push(photosJson[r].code);return this.render()},render:function(){var t;t=_.template($("#archive").html()),this.$el.html(t({photoArr:this.photoArr,linkArr:this.linkArr,id:this.id,arrow:this.arrow}))}}),Gallery=Backbone.View.extend({el:".content",init:function(t){var o,e;return o=["colours","southeast","india","labour","days","portfolio"],-1===o.indexOf(t.id)?(e=new Backbone.Router,void e.navigate("/projects",{trigger:!0})):($("body").attr("class","gallery-page"),this.id=t.id+"-page",this.render())},render:function(){var t;t=_.template($("#gallery").html()),this.$el.html(t({id:this.id}))}}),Home=Backbone.View.extend({init:function(){var t;return t=new Backbone.Router,t.navigate("/photos",{trigger:!0})}}),Photos=Backbone.View.extend({el:".content",init:function(t){var o;return $(".home .arrow").removeClass("mobile-hidden"),setTimeout(function(){$(".home .arrow").addClass("mobile-hidden")},2e3),this.arrow="",$("body").attr("class","photo-page"),this.id=parseInt(photosJson.length-1),this.photoURL=photosJson[photosJson.length-1].code,t.id&&(o=parseInt(t.id,10),parseInt(t.id,10)&&o<photosJson.length&&o>0&&(this.photoURL=photosJson[t.id].code,this.id=parseInt(t.id))),this.id===photosJson.length-1?this.arrow="right":1===this.id&&(this.arrow="left"),this.render()},render:function(){var t;t=_.template($("#photos").html()),this.$el.html(t({photoURL:this.photoURL,id:this.id,arrow:this.arrow})),App.preload(this.id)}}),Projects=Backbone.View.extend({el:".content",init:function(){return $("body").attr("class","project-page"),this.render()},render:function(){var t;t=_.template($("#projects").html()),this.$el.html(t())}}),Router=Backbone.Router.extend({routes:{"(/)":"home","archive(/)":"archive","archive(/):id(/)":"archive","gallery(/)":"gallery","gallery/:id(/)":"gallery","photos(/)":"photos","photos/:id(/)":"photos","projects(/)":"projects","about(/)":"about"}});